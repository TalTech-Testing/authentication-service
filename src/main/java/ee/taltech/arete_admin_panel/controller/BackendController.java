package ee.taltech.arete_admin_panel.controller;

import ee.taltech.arete_admin_panel.algorithms.SHA512;
import ee.taltech.arete_admin_panel.domain.User;
import ee.taltech.arete_admin_panel.exception.UserNotFoundException;
import ee.taltech.arete_admin_panel.exception.UserWrongCredentials;
import ee.taltech.arete_admin_panel.pojo.abi.users.UserPostDto;
import ee.taltech.arete_admin_panel.pojo.abi.users.UserResponseIdToken;
import ee.taltech.arete_admin_panel.service.TokenService;
import ee.taltech.arete_admin_panel.service.UserService;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.http.HttpStatus;
import org.springframework.web.bind.annotation.*;

import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;

@RestController()
@RequestMapping("/admin")
public class BackendController {

    private final Logger LOG = LoggerFactory.getLogger(this.getClass());

    private final UserService userService;
    private final TokenService tokenService;

    public BackendController(UserService userService, TokenService tokenService) {
        this.userService = userService;
        this.tokenService = tokenService;
    }

    @ResponseStatus(HttpStatus.OK)
    @PostMapping(path = "/auth")
    public UserResponseIdToken getHome(@RequestBody UserPostDto userDto) {
        User user = userService.getUser(userDto.getUsername());

        SHA512 sha512 = new SHA512();
        String passwordHash = sha512.get_SHA_512_SecurePassword(userDto.getPassword(), user.getSalt());

        if (!user.getPasswordHash().equals(passwordHash)) {
            throw new UserWrongCredentials("Wrong login.");
        }

        return tokenService.createResponse(userService.getHome(user.getUsername()));
    }

    @ResponseStatus(HttpStatus.OK)
    @GetMapping(path = "/submissions")
    public String getSubmissions() {
        return "[{\"id\":10731,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:vstepa/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"5ce6982c618c9bd505501e27979310641b1f2777\",\"uniid\":\"vstepa\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX02WebBrowser\"],\"commitMessage\":\"EX02 - WebBrowser\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580591256024,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10732,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:tonlui/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"620c221d0099520740ca933ee57f7b4414099440\",\"uniid\":\"tonlui\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX01IdCode\"],\"commitMessage\":\"ex01\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580591420419,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10733,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:vstepa/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"67a3feb543d89d616865fbf69bb86d9455fa7508\",\"uniid\":\"vstepa\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX02WebBrowser\"],\"commitMessage\":\"EX02 - WebBrowser\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580591599797,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10734,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:tonlui/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"cc6cf654e61ba265fe1d3d5c53bafe121deb0057\",\"uniid\":\"tonlui\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX01IdCode\"],\"commitMessage\":\"ex01\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580591684056,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10735,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:vstepa/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"63164fc6d7badd733b990a11d77113ce4b19136b\",\"uniid\":\"vstepa\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX02WebBrowser\"],\"commitMessage\":\"EX02 - WebBrowser\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580591728751,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10736,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:tonlui/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"6516c960e10126db3b58f9f243b5e96e57f5b258\",\"uniid\":\"tonlui\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX01IdCode\"],\"commitMessage\":\"ex01\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580591935644,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10737,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:heheli/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"75fbbc23d2c02951e0ecfba1c9d2570913bd8d30\",\"uniid\":\"heheli\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX01IdCode\"],\"commitMessage\":\"sush@\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580592220208,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10738,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:matrub/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"e79a8631d43de0ae585c90b168616e7b6f2abbd4\",\"uniid\":\"matrub\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX01IdCode\"],\"commitMessage\":\"First try EX01\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580592221716,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10739,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:vstepa/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"d4075d7aa0f362972b21afc01d5bca6b923475ed\",\"uniid\":\"vstepa\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX02WebBrowser\"],\"commitMessage\":\"EX02 - WebBrowser\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580592307718,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10740,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:tonlui/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"2bae0ca2f6b702cf82e86aacad53f1f5ffd7734c\",\"uniid\":\"tonlui\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX01IdCode\"],\"commitMessage\":\"ex01\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580592353076,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10741,\"testingPlatform\":\"python\",\"returnUrl\":\"http://localhost:8098/waitingroom/u0qrysn5umgkbzggqwhq9ynaobeoe2r3hz8ftn1w\",\"gitStudentRepo\":null,\"source\":[{\"path\":\"pr07_pyramid/pyramid.py\",\"contents\":\"\\\"\\\"\\\"Program that creates beautiful pyramids.\\\"\\\"\\\"\\r\\n\\r\\n\\r\\ndef make_pyramid(size,char):\\r\\n    pyramid = []\\r\\n    spacemeter = 0\\r\\n    while size > 0:\\r\\n        block = []\\r\\n        block.append([\\\" \\\" for i in range(spacemeter)])\\r\\n        block.append([char for i in range(size)])\\r\\n        block.append([\\\" \\\" for i in range(spacemeter)])\\r\\n        pyramid.append([x for i in block for x in i])\\r\\n        size -= 2\\r\\n        spacemeter += 1\\r\\n    pyramid.reverse()    \\r\\n\\r\\n    return pyramid\\r\\n\\r\\n\\r\\ndef join_pyramids(first,second):\\r\\n    if(len(first) > len(second)):\\r\\n        times = len(first)-len(second)\\r\\n        second.reverse()\\r\\n        while times > 0:\\r\\n            second.append( [\\\" \\\" for i in range(len(second[0]))])\\r\\n            times -= 1\\r\\n        second.reverse()\\r\\n    elif(len(first) < len(second)):\\r\\n        times = len(second)-len(first)\\r\\n        first.reverse()\\r\\n        while times > 0:\\r\\n            first.append([\\\" \\\" for i in range(len(first[0]))])\\r\\n            times -= 1\\r\\n        first.reverse()\\r\\n    pyramid = [[first[i] + second[i]][0]for i in range(len(first))]\\r\\n    return pyramid\\r\\n\\r\\n\\r\\ndef to_string(tostring):\\r\\n    length = len(tostring[0])\\r\\n    x = len(tostring[0])\\r\\n    length2 = len(tostring)\\r\\n    pyramid = \\\"\\\".join([x for i in tostring for x in i])\\r\\n    pyramid = list(pyramid)\\r\\n    while length2 > 1:\\r\\n        pyramid.insert(length,\\\"\\\\n\\\")\\r\\n        length += x+1\\r\\n        length2 -= 1\\r\\n    pyramid = \\\"\\\".join([i for i in pyramid])\\r\\n    return pyramid\\r\\n\\r\\n\\r\\nif __name__ == '__main__':\\r\\n    pyramid_a = make_pyramid(3, \\\"A\\\")\\r\\n    print(pyramid_a)  # ->\\r\\n    \\\"\\\"\\\"\\r\\n    [\\r\\n        [' ', 'A', ' '],\\r\\n        ['A', 'A', 'A']\\r\\n    ]\\r\\n    \\\"\\\"\\\"\\r\\n\\r\\n    pyramid_b = make_pyramid(6, 'a')\\r\\n    print(pyramid_b)  # ->\\r\\n    \\\"\\\"\\\"\\r\\n    [\\r\\n        [' ', ' ', 'a', 'a', ' ', ' '],\\r\\n        [' ', 'a', 'a', 'a', 'a', ' '],\\r\\n        ['a', 'a', 'a', 'a', 'a', 'a']\\r\\n    ]\\r\\n    \\\"\\\"\\\"\\r\\n\\r\\n    joined = join_pyramids(pyramid_a, pyramid_b)\\r\\n    print(joined)  # ->\\r\\n    \\\"\\\"\\\"\\r\\n    [\\r\\n        [' ', ' ', ' ', ' ', ' ', 'a', 'a', ' ', ' '],\\r\\n        [' ', 'A', ' ', ' ', 'a', 'a', 'a', 'a', ' '],\\r\\n        ['A', 'A', 'A', 'a', 'a', 'a', 'a', 'a', 'a']\\r\\n    ]\\r\\n    \\\"\\\"\\\"\\r\\n\\r\\n    pyramid_string = to_string(joined)\\r\\n    print(pyramid_string)  # ->\\r\\n    \\\"\\\"\\\"\\r\\n            aa  \\r\\n        A  aaaa \\r\\n    AAAaaaaaa\\r\\n    \\\"\\\"\\\"\\r\\n\"}],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0102-2019/ex.git\",\"testSource\":[],\"hash\":\"lapiki65a9o9uywuz0os8b9jjalx2cx2pmel232j\",\"uniid\":null,\"course\":\"iti0102-2019/ex\",\"folder\":null,\"slugs\":[\"pr07_pyramid\"],\"commitMessage\":null,\"dockerExtra\":[],\"systemExtra\":[\"noFiles\",\"noMail\"],\"dockerTimeout\":360,\"timestamp\":1580592369802,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10742,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:vstepa/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"5db49a33ba16bcb99407d7f8cb030831d8b0abf0\",\"uniid\":\"vstepa\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX02WebBrowser\"],\"commitMessage\":\"EX02 - WebBrowser\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580592421673,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10743,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:vstepa/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"d0314497a3ba6de039f3e848e1914179330520f5\",\"uniid\":\"vstepa\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX02WebBrowser\"],\"commitMessage\":\"EX02 - WebBrowser\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580592466008,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10744,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:heheli/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"08ef24c5f2e81115ab8248b7c219c28fdbfa3aba\",\"uniid\":\"heheli\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX01IdCode\"],\"commitMessage\":\"sush@\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580592983088,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10745,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:vstepa/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"b86cc8c68eba23f3c2a9440b9ddc8a43cf5bcdf6\",\"uniid\":\"vstepa\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX02WebBrowser\"],\"commitMessage\":\"EX02 - WebBrowser\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580593857056,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10746,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:vstepa/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"1d2d43984dc0494fc4247a1b35e4da453a15043f\",\"uniid\":\"vstepa\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX02WebBrowser\"],\"commitMessage\":\"EX02 - WebBrowser\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580594010141,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10747,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:helent/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"a4d0d2612224727d1f7955cf46c201ca3bd02982\",\"uniid\":\"helent\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX01IdCode\"],\"commitMessage\":\"birthplace test\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580594339494,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10748,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:arsieg/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"efad68af3696ba2fe3b7e8316c1b6335896bb9f6\",\"uniid\":\"arsieg\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX02WebBrowser\"],\"commitMessage\":\"Initial\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580594359914,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10749,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:arsieg/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"1b7f92bfc3b5f4ac50a033b6984cb792ce0b1a74\",\"uniid\":\"arsieg\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX02WebBrowser\"],\"commitMessage\":\"Initial\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580594524996,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null},{\"id\":10750,\"testingPlatform\":\"java\",\"returnUrl\":\"https://ained.ttu.ee/mod/charon/api/tester_new_callback\",\"gitStudentRepo\":\"git@gitlab.cs.ttu.ee:helent/iti0200-2020.git\",\"source\":[],\"gitTestSource\":\"git@gitlab.cs.ttu.ee:iti0200-2020/ex.git\",\"testSource\":[],\"hash\":\"d05412dfe9d8ffd3d8e4f182f4c8cdebba3849cc\",\"uniid\":\"helent\",\"course\":\"iti0200-2020/ex\",\"folder\":\"iti0200-2020\",\"slugs\":[\"EX01IdCode\"],\"commitMessage\":\"birthplace test\\n\",\"dockerExtra\":[\"-r TESTNG,COMPILER,CHECKSTYLE,FILEWRITER,REPORT\"],\"systemExtra\":[],\"dockerTimeout\":120,\"timestamp\":1580594670664,\"priority\":5,\"thread\":null,\"returnExtra\":null,\"waitingroom\":null}]";
    }

    @ResponseStatus(HttpStatus.OK)
    @GetMapping(path = "/submission/{hash}")
    public String getSubmission(@PathVariable("hash") String hash) throws IOException {
        return new String(Files.readAllBytes(Paths.get("C:\\Users\\envomp\\IdeaProjects\\arete_admin_panel\\src\\main\\java\\ee\\taltech\\arete_admin_panel\\controller\\submission.json")));
    }
}
